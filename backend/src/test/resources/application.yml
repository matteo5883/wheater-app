# Test configuration for WeatherApp
# This file provides test-specific configuration that overrides the main application.yml

# Weather API configuration for tests
weather:
  api-key: test-api-key-12345
  base-url: https://test-api.example.com/v1
  api-provider: openweathermap
  enable-mock-mode: true
  cache-expiration-minutes: 5
  max-cache-size: 100
  max-forecast-days: 7
  api-timeout-seconds: 10
  api-retry-attempts: 1

  # HTTP Client configuration for tests (faster timeouts)
  http-client:
    connect-timeout-seconds: 2
    read-timeout-seconds: 5
    write-timeout-seconds: 2

  # Cache configuration for tests
  cache:
    expiration: PT5M  # 5 minutes for tests
    maximum-size: 100
    record-stats: true

# Spring configuration for tests
spring:
  profiles:
    active: test
  main:
    banner-mode: off
  output:
    ansi:
      enabled: never

# Logging configuration for tests
logging:
  level:
    root: INFO
    com.weather: DEBUG
    org.springframework: WARN
    okhttp3: DEBUG
  pattern:
    console: "%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"

# Disable unnecessary features for tests
management:
  endpoints:
    enabled-by-default: false
  endpoint:
    health:
      enabled: true

# Test database configuration (if needed in future)
spring.datasource:
  url: jdbc:h2:mem:testdb
  driver-class-name: org.h2.Driver
  username: sa
  password: ""

# JPA configuration for tests
spring.jpa:
  hibernate:
    ddl-auto: create-drop
  show-sql: false
  properties:
    hibernate:
      dialect: org.hibernate.dialect.H2Dialect
      format_sql: false
